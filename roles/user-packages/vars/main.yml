---
# Package definitions for the user-packages role
# NOTE: Native packages and GUI apps have been moved to the system-packages role
# This role only handles: Homebrew formulae, Nix, and Mise tools

###############################################################################
# Homebrew Packages
# Ansible is the single source of truth for brew formulae.
# No more Brewfile — packages are listed here and installed directly.
#
# Structure: common (cross-OS, per-mode) + per-OS per-mode lists.
# Mode hierarchy: full ⊃ dev ⊃ minimal
# Lists are accumulated: a full build includes minimal + dev + full.
#
# Entries can be a plain string or a dict with keys:
#   name:            (required) formula name
#   state:           (optional) e.g. "head" for --HEAD installs
#   install_options:  (optional) extra brew install flags
###############################################################################

brew_taps:
  - tinted-theming/tinted
  - psviderski/tap

brew_packages:
  common:
    minimal:
      - age
      - ca-certificates
      - curl
      - fd
      - fzf
      - gcc
      - git
      - jq
      - llvm
      - luarocks
      - name: neovim
        state: head
      - socat
      - tinted-theming/tinted/tinty
      - the_silver_searcher
      - tmux
      - tree-sitter
      - tree-sitter-cli
      - unzip
      - watch
      - zoxide
    dev:
      - btop
      - claude-code
      - diff-so-fancy
      - difi
      - direnv
      - gh
      - lazygit
      - psviderski/tap/uncloud
      - rclone
      - starship
    full:
      - cairo
      - duckdb
      - fossil
      - imagemagick
      - lazydocker
      - opencode
      - trivy
      - ttyd

  darwin:
    minimal:
      - openssl@3
      - qemu
    dev:
      - cocoapods
      - zsh
    full:
      - terminal-notifier

  linux:
    minimal: []
    dev: []
    full:
      - ideviceinstaller

###############################################################################
# Mise Packages
# Tools to install globally via `mise use --global`.
# Flat across OS — only split by mode.
# Mode hierarchy: full ⊃ dev ⊃ minimal
###############################################################################

mise_packages:
  minimal:
    - go
    - node
    - npm
    - python
    - rust
    - uv
  dev:
    - ansible
    - bun
    - lua-language-server
    - npm:@tailwindcss/language-server
    - npm:@vtsls/language-server
    - npm:@vue/language-server
    - npm:svelte-language-server
    - npm:typescript
    - npm:typescript-language-server
    - npm:vscode-langservers-extracted
    - pipx
    - pipx:pyright
    - pipx:ruff
    - pnpm
  full:
    - flutter
    - java
    - ruby

###############################################################################
# Mode-based Configuration
# Controls which package sources are enabled per mode
###############################################################################

mode_config:
  full:
    install_brew_packages: true
    install_mise_packages: true
    install_nix_packages: true

  dev:
    install_brew_packages: true
    install_mise_packages: true
    install_nix_packages: true

  minimal:
    install_brew_packages: true
    install_mise_packages: true
    install_nix_packages: false
